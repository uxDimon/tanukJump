<template>
    <div class="game-wrap">
        <a href="/lk.html" class="back-button pop-up__back-buttom" style="z-index: 40;right: 13px;left: inherit;" @click.stop.prevent="fullscreen">
            <svg v-if="full" width="30" height="30" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.20023 33.4699C2.84408 33.8139 2.36708 34.0042 1.87196 33.9999C1.37683 33.9956 0.903207 33.797 0.553089 33.4469C0.202971 33.0967 0.00437387 32.6231 7.13852e-05 32.1279C-0.0042311 31.6328 0.186105 31.1558 0.530086 30.7996L5.56824 25.763H2.57519C2.11237 25.7629 1.66572 25.5928 1.32004 25.2851C0.974357 24.9773 0.753726 24.5533 0.70004 24.0936L0.686821 23.8746C0.686821 23.3737 0.885774 22.8934 1.23991 22.5392C1.59405 22.1851 2.07436 21.9861 2.57519 21.9861H10.1286C10.6295 21.9861 11.1098 22.1851 11.4639 22.5392C11.8181 22.8934 12.017 23.3737 12.017 23.8746V31.4285C12.017 31.9293 11.8181 32.4096 11.4639 32.7638C11.1098 33.118 10.6295 33.3169 10.1286 33.3169C9.62782 33.3169 9.14751 33.118 8.79337 32.7638C8.43923 32.4096 8.24028 31.9293 8.24028 31.4285V28.4315L3.20023 33.4699ZM31.4038 21.9633C31.9046 21.9633 32.3849 22.1623 32.739 22.5164C33.0932 22.8706 33.2921 23.3509 33.2921 23.8518C33.2921 24.3526 33.0932 24.833 32.739 25.1871C32.3849 25.5413 31.9046 25.7402 31.4038 25.7402H28.4145L33.447 30.7768C33.7721 31.102 33.9674 31.5346 33.9963 31.9936C34.0251 32.4525 33.8855 32.9062 33.6037 33.2696L33.447 33.4471C33.0929 33.8011 32.6126 34 32.1119 34C31.6112 34 31.1309 33.8011 30.7768 33.4471L25.7387 28.4049V31.4057C25.7386 31.8682 25.5688 32.3146 25.2615 32.6603C24.9541 33.0059 24.5306 33.2268 24.0712 33.2809L23.8503 33.2941C23.3495 33.2941 22.8692 33.0952 22.515 32.741C22.1609 32.3868 21.9619 31.9065 21.9619 31.4057V23.8518C21.9619 23.3509 22.1609 22.8706 22.515 22.5164C22.8692 22.1623 23.3495 21.9633 23.8503 21.9633H31.4038ZM2.59624 12.0386C2.09541 12.0386 1.6151 11.8396 1.26096 11.4855C0.906827 11.1313 0.707874 10.651 0.707874 10.1501C0.707874 9.64927 0.906827 9.16893 1.26096 8.81477C1.6151 8.46061 2.09541 8.26165 2.59624 8.26165H5.58552L0.553028 3.22321C0.227896 2.89803 0.0325807 2.46538 0.00372427 2.00644C-0.0251322 1.54749 0.114453 1.09378 0.396294 0.730435L0.553028 0.552919C0.907149 0.198885 1.38737 0 1.8881 0C2.38883 0 2.86905 0.198885 3.22318 0.552919L8.26133 5.59513V2.59624C8.26139 2.13369 8.4312 1.68725 8.73855 1.3416C9.0459 0.995939 9.46941 0.77511 9.92876 0.720992L10.1497 0.707772C10.6505 0.707772 11.1308 0.906736 11.485 1.26089C11.8391 1.61505 12.0381 2.09539 12.0381 2.59624V10.1501C12.0381 10.651 11.8391 11.1313 11.485 11.4855C11.1308 11.8396 10.6505 12.0386 10.1497 12.0386H2.59624ZM23.8504 12.0387C23.3496 12.0387 22.8693 11.8398 22.5152 11.4856C22.161 11.1315 21.9621 10.6511 21.9621 10.1503V2.59638C21.9621 2.09553 22.161 1.61519 22.5152 1.26103C22.8693 0.906877 23.3496 0.707913 23.8504 0.707913C24.3513 0.707913 24.8316 0.906877 25.1857 1.26103C25.5399 1.61519 25.7388 2.09553 25.7388 2.59638V5.59527L30.777 0.553059C31.1021 0.227909 31.5348 0.0325825 31.9937 0.00372447C32.4526 -0.0251336 32.9063 0.114459 33.2696 0.396316L33.4471 0.553059C33.8011 0.9072 34 1.38745 34 1.88821C34 2.38896 33.8011 2.86921 33.4471 3.22335L28.4127 8.26179H31.4039C31.8664 8.26185 32.3128 8.43167 32.6585 8.73904C33.0041 9.0464 33.2249 9.46994 33.279 9.92931L33.2923 10.1503C33.2923 10.6511 33.0933 11.1315 32.7392 11.4856C32.385 11.8398 31.9047 12.0387 31.4039 12.0387H23.8504Z" fill="white"/></svg>
            <svg v-else width="30" height="30" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.81677 22.5162C9.17292 22.1722 9.64993 21.9819 10.1451 21.9862C10.6402 21.9905 11.1138 22.1891 11.4639 22.5392C11.814 22.8894 12.0126 23.363 12.0169 23.8582C12.0212 24.3533 11.8309 24.8303 11.4869 25.1865L6.44876 30.2231H9.44182C9.90463 30.2232 10.3513 30.3933 10.697 30.701C11.0427 31.0088 11.2633 31.4328 11.317 31.8925L11.3302 32.1115C11.3302 32.6124 11.1312 33.0927 10.7771 33.4469C10.423 33.801 9.94265 34 9.44182 34H1.88836C1.38754 34 0.907226 33.801 0.553089 33.4469C0.198952 33.0927 0 32.6124 0 32.1115V24.5577C0 24.0568 0.198952 23.5765 0.553089 23.2223C0.907226 22.8681 1.38754 22.6692 1.88836 22.6692C2.38919 22.6692 2.8695 22.8681 3.22364 23.2223C3.57778 23.5765 3.77673 24.0568 3.77673 24.5577V27.5547L8.81677 22.5162V22.5162ZM24.5582 34C24.0574 34 23.577 33.801 23.2229 33.4469C22.8688 33.0927 22.6698 32.6124 22.6698 32.1115C22.6698 31.6107 22.8688 31.1303 23.2229 30.7762C23.577 30.422 24.0574 30.2231 24.5582 30.2231H27.5475L22.515 25.1865C22.1898 24.8613 21.9945 24.4287 21.9657 23.9697C21.9368 23.5108 22.0764 23.0571 22.3582 22.6937L22.515 22.5162C22.8691 22.1622 23.3493 21.9633 23.85 21.9633C24.3508 21.9633 24.831 22.1622 25.1851 22.5162L30.2233 27.5584V24.5577C30.2233 24.0951 30.3931 23.6487 30.7005 23.303C31.0078 22.9574 31.4314 22.7365 31.8907 22.6824L32.1116 22.6692C32.6125 22.6692 33.0928 22.8681 33.4469 23.2223C33.801 23.5765 34 24.0568 34 24.5577V32.1115C34 32.6124 33.801 33.0927 33.4469 33.4469C33.0928 33.801 32.6125 34 32.1116 34H24.5582V34ZM9.44182 0C9.94265 0 10.423 0.198963 10.7771 0.55312C11.1312 0.907276 11.3302 1.38762 11.3302 1.88847C11.3302 2.38932 11.1312 2.86966 10.7771 3.22382C10.423 3.57797 9.94265 3.77694 9.44182 3.77694H6.45254L11.485 8.81537C11.8102 9.14056 12.0055 9.5732 12.0343 10.0322C12.0632 10.4911 11.9236 10.9448 11.6418 11.3082L11.485 11.4857C11.1309 11.8397 10.6507 12.0386 10.15 12.0386C9.64923 12.0386 9.16901 11.8397 8.81489 11.4857L3.77673 6.44346V9.44235C3.77667 9.9049 3.60686 10.3513 3.29951 10.697C2.99216 11.0426 2.56865 11.2635 2.1093 11.3176L1.88836 11.3308C1.38754 11.3308 0.907226 11.1319 0.553089 10.7777C0.198952 10.4235 0 9.9432 0 9.44235V1.88847C0 1.38762 0.198952 0.907276 0.553089 0.55312C0.907226 0.198963 1.38754 0 1.88836 0H9.44182ZM32.1116 0C32.6125 0 33.0928 0.198963 33.4469 0.55312C33.801 0.907276 34 1.38762 34 1.88847V9.44235C34 9.9432 33.801 10.4235 33.4469 10.7777C33.0928 11.1319 32.6125 11.3308 32.1116 11.3308C31.6108 11.3308 31.1305 11.1319 30.7764 10.7777C30.4222 10.4235 30.2233 9.9432 30.2233 9.44235V6.44346L25.1851 11.4857C24.86 11.8108 24.4273 12.0061 23.9684 12.035C23.5095 12.0639 23.0558 11.9243 22.6925 11.6424L22.515 11.4857C22.161 11.1315 21.9621 10.6513 21.9621 10.1505C21.9621 9.64977 22.161 9.16951 22.515 8.81537L27.5494 3.77694H24.5582C24.0957 3.77688 23.6492 3.60706 23.3036 3.29969C22.958 2.99233 22.7371 2.56879 22.683 2.10942L22.6698 1.88847C22.6698 1.38762 22.8688 0.907276 23.2229 0.55312C23.577 0.198963 24.0574 0 24.5582 0H32.1116Z" fill="white"/></svg>
        </a>
        <tribune></tribune>
        <panel></panel>
        <pop-up v-if="popUp"></pop-up>
        <progres></progres>
    </div>
</template>

<script>
import panel from "./components/panel.vue";
import tribune from "./components/tribune.vue";
import popUp from "./components/popUp.vue";
import progres from "./ui/progres.vue";
import { mapGetters, mapMutations } from "vuex";

export default {
    components: {
        panel,
        tribune,
        popUp,
        progres,
    },
    mounted() {},
    updated() {
        const mw = document.querySelector('.master-wrap');
        const gw = document.querySelector('.game-wrap');
        if(mw) {
            if(this.full) {
                let scale = 1;  
                if(mw.clientWidth > (gw.clientWidth * scale)) {
                    while(true) {
                        if(mw.clientWidth > (gw.clientWidth * scale) && mw.clientHeight > (gw.clientHeight * scale)) {
                                scale += 0.01;
                                gw.style.transform = `scale(${scale})`;
                        } else break;
                    } 
                }
                if(mw.clientWidth < (gw.clientWidth * scale)) {
                    while(true) {
                        if(mw.clientHeight < (gw.clientHeight * scale)) {
                            scale -= 0.01;
                            gw.style.transform = `scale(${scale})`;
                        } else break;
                    } 
                }
                mw.classList.add('master-wrap_fixed');
            } else {
                gw.style.transform = `scale(1)`;
                mw.classList.remove('master-wrap_fixed');
            }
        }
    },
    methods: {
        ...mapMutations({
            startGame: "startGame",
        }),
        fullscreen() {
            this.full = !this.full;
        },
    },
    data() {
        return {
            maessage: "",
            full: false,
        };
    },
    computed: {
        ...mapGetters({
            popUp: "popUp",
        }),
    },
};

// var mw = document.querySelector('.master-wrap');
// var gw = document.querySelector('.game-wrap');

  
// var scale = 1;  
// if(mw.clientWidth > (gw.clientWidth * scale)) {
//    while(true) {
//        if(mw.clientWidth > (gw.clientWidth * scale) && mw.clientHeight > (gw.clientHeight * scale)) {
//              scale += 0.01;
//              gw.style.transform = `scale(${scale})`;
//        } else {
//            break;
//        }
//    } 
// }

// if(mw.clientWidth < (gw.clientWidth * scale)) {
//    while(true) {
//         if(mw.clientHeight < (gw.clientHeight * scale)) {
//               scale -= 0.01;
//               gw.style.transform = `scale(${scale})`;
//         } else {
//             break;
//         }
//     } 
//  }

</script>

<style lang="scss">
.master-wrap_fixed {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 999999999;
    background-color: #181836;
    padding: 0;
    margin: 0;
}
.game-wrap {
    position: absolute;
    width: 890px;
    height: 500px;
    background: #222222;
    display: grid;
    grid-template-rows: 1fr 98px;
}

.rotate-screen {
    display: none;
}

// @media (min-device-height: 1020px) and (max-device-height: 1080px) and (max-width: 1920px){
//     .game-wrap {
//         transform: scale(2.0);
//     }
// }

// @media (min-device-height: 720px) and (max-device-height: 768px) and (max-width: 1366px){
//     .game-wrap {
//         transform: scale(1.4);
//     }
// }
// @media (min-device-height: 890px) and (max-device-height: 900px) and (max-width: 1440px){
//     .game-wrap {
//         transform: scale(1.6);
//     }
// }

@media screen and (orientation: portrait) and (max-width: 500px) {
    .game-wrap {
        display: none;
    }

    .rotate-screen {
        display: flex;
    }
}
</style>
